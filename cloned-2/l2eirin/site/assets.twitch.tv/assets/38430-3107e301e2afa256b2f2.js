!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b65c2933-ba65-4fa5-84ba-65b626288dbe",e._sentryDebugIdIdentifier="sentry-dbid-b65c2933-ba65-4fa5-84ba-65b626288dbe")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[38430],{733543:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoPlayer_CollectionContent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},33698:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoPlayer_VODSeekbarPreviewVideo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePrivate"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"Variable",name:{kind:"Name",value:"includePrivate"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"seekPreviewsURL"},arguments:[],directives:[]}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},841019:function(e,n,t){"use strict";t.d(n,{U:function(){return i}});var i=function(){function e(e,n){var t=this;this.throttleDuration=0,this.throttled=!1,this.timeout=0,this.unthrottle=function(){t.trailing&&t.trailingFn&&t.trailingFn(),t.clear()},this.throttleDuration=e,this.trailing=!(n&&n.skipTrailing)}return e.prototype.invoke=function(e){this.throttled?this.trailingFn=e:(this.throttled=!0,this.timeout=setTimeout(this.unthrottle,this.throttleDuration),e())},e.prototype.clear=function(){clearTimeout(this.timeout),this.timeout=0,this.throttled=!1,delete this.trailingFn},e}()},235366:function(e,n,t){"use strict";t.d(n,{Cv:function(){return l},L$:function(){return c},NC:function(){return d},p6:function(){return u}});var i=t(882439),o=t(478260),r=t(465823),a=t(407310),s="clips_target";function u(e){switch(e){case"CAN_CREATE_CLIP_NOT_SUBSCRIBED":case"CATEGORY_NOT_CLIPPABLE":case"FOLLOWING_LENGTH_REQUIREMENT_NOT_MET":case"USER_NOT_FOLLOWING":return!0;default:return!1}}function c(e){switch(e){case"CAN_CREATE_CLIP_NOT_SUBSCRIBED":case"CATEGORY_NOT_CLIPPABLE":case"FOLLOWING_LENGTH_REQUIREMENT_NOT_MET":case"USER_NOT_FOLLOWING":case"DJ_CATEGORY_NOT_CLIPPABLE":case"PARTICIPATING_DJ":return!0;default:return!1}}function l(e,n){if(!e)return(0,o.hw)("Clip ({clipKey}+x)",{clipKey:h()},"ClipsButtonComponent");if("FOLLOWING_LENGTH_REQUIREMENT_NOT_MET"===e)switch(n){case 10:return(0,o.hw)("Follow for 10m to clip","ClipsButtonComponent");case 30:return(0,o.hw)("Follow for 30m to clip","ClipsButtonComponent");case 60:return(0,o.hw)("Follow for 1h to clip","ClipsButtonComponent");case 1440:return(0,o.hw)("Follow for 1d to clip","ClipsButtonComponent");case 10080:return(0,o.hw)("Follow for 1w to clip","ClipsButtonComponent");case 43200:return(0,o.hw)("Follow for 1 month to clip","ClipsButtonComponent");case 129600:return(0,o.hw)("Follow for 3 months to clip","ClipsButtonComponent");default:return(0,o.hw)("Following length requirement not met","ClipsButtonComponent")}switch(e){case"CAN_CREATE_CLIP_NOT_SUBSCRIBED":return(0,o.hw)("Subscribe to clip","ClipsButtonComponent");case"CATEGORY_NOT_CLIPPABLE":return(0,o.hw)("This channel does not permit clips of this category.","ClipsButtonComponent");case"USER_NOT_FOLLOWING":return(0,o.hw)("Follow to clip","ClipsButtonComponent");case"DJ_CATEGORY_NOT_CLIPPABLE":return(0,o.hw)("DJ category can't be clipped.","ClipsButtonComponent");case"PARTICIPATING_DJ":return(0,o.hw)("DJ channels can't be clipped.","ClipsButtonComponent");default:return""}}var d=function(e){var n=e.broadcastID,t=e.broadcasterLogin,o=e.offsetSeconds,a=e.vodID,u=window.location.origin,c=window.location.search,l=window.open("","_blank"),d=function(e,n){return/\/\/(www|dashboard|player|embed|go|canary|rc|.*\.rc|.*\.canary)\.twitch\.tv/.test(e)?"https://clips.twitch.tv":n[s]?"https://clips-".concat(n[s],".twitch.tv"):n.clips_use_localhost?"http://localhost.twitch.tech:8080":/\/\/pr\d{5}\.twitch\.tech/.test(e)?"https://clips-".concat(e.replace("https://","")):/\/\/betaplayer\.twitch\.tv/.test(e)?"https://clips-alpha.twitch.tv":(0,r.Ri)("clips-staging","string")||"https://clips-main.twitch.tech"}(u,(0,i.parse)(c)),h={offsetSeconds:o,broadcastID:n,broadcasterLogin:t||void 0,vodID:a};d="".concat(d,"/create?").concat(i.stringify(h)),l?l.location.href=d:window.open(d,"_blank")};function h(){return a.j.os.isMacOS()?"‚å•":"alt"}},523540:function(e,n,t){"use strict";t.d(n,{FQ:function(){return u},Uk:function(){return l},mO:function(){return s},u5:function(){return d}});var i,o,r=t(478260),a=t(588252),s=((i={twitter:"twitter",reddit:"reddit",vkontake:"vkontakte",facebook:"facebook"}).copy="link",i["copy-input"]="option_link",i.download="download",i.embed="embed",i),u={Game:"TopClipsGame",Channel:"TopClipsChannel"},c=((o={MyClips:"my_clips",ClipsOfMyChannel:"my_clips_channel",TopClipsGame:"clips_game",TopClipsChannel:"channel_clips"}).clips_edit="clips_edit",o.clips_viewing="clips_viewing",o.clips_watch="clips_watch",o),l=function(e,n,t,i,o){return function(a){r.x2.tracking.__track_SSRMigrationFixme("video_share",{vod_id:e,vod_type:"clip",share_platform:s[a],location:c[o],game:n,channel_id:Number(t||0),channel:i,live:null})}},d=function(e,n,t,i,o,s){return function(){r.x2.tracking.__track_SSRMigrationFixme("video_share",{vod_id:e,vod_type:"clip",share_platform:a.tz.Link,location:c[o],game:n,channel_id:Number(t||0),channel:i,live:null,shared_item_url:s})}}},509856:function(e,n,t){"use strict";t.d(n,{h:function(){return d}});var i=t(331635),o=t(474848),r=t(296540),a=t(783321),s=t(933781),u=t(347953),c=t(733543),l=t.n(c);function d(){return function(e){var n=e;return function(e){var t,c,d=r.useContext(s.kl).content,h=(0,u.P3)(d)?d:null,p=null==h?void 0:h.collectionID,f=null==h?void 0:h.vodID,v=(0,a.IT)(l(),{skip:!(p&&!f),variables:{id:null!=p?p:""}}),m=v.data,g=v.loading,b=v.error,k=null!=f?f:null===(c=null===(t=null==m?void 0:m.collection)||void 0===t?void 0:t.items.edges[0])||void 0===c?void 0:c.node.id;return(0,o.jsx)(n,(0,i.__assign)({},e,{collectionContent:h,collectionLoading:g,collectionError:b,collectionVodID:k}))}}}},446416:function(e,n,t){"use strict";t.d(n,{P:function(){return v}});var i=t(331635),o=t(474848),r=t(959340),a=t(914421),s=t(724422),u=t(296540),c=t(841019),l=t(815759),d=t(393942),h=t(696830),p=t(637121),f=t(281976),v=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hoverLocation:0,isMouseOver:!1},n.throttleTimer=new c.U(p.Q),n.handleMouseOverLocationChange=function(e){n.throttleTimer.invoke((function(){n.setState((function(n){return n.hoverLocation===e?null:{hoverLocation:e}}))}))},n.handleMouseOverChange=function(e){n.setState((function(n){return n.isMouseOver===e?null:{isMouseOver:e}}))},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChanged(e)},n}return(0,i.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.thumbLocation,t=e.clipLength,i=e.overlay,u=e.alwaysShowThumb,c=e.thumbAriaAttributes,p=t,v=[{type:h.b.FillToThumb,id:"watched-segment",color:s.K["color-twitch-purple-10"]}];return(0,o.jsxs)(r.P,{display:a.nl.Flex,flexDirection:a.bo.Column,alignItems:a.k2.Stretch,children:[(0,o.jsx)(l.l,{currentTimeInSeconds:this.state.hoverLocation,durationInSeconds:p,show:this.state.isMouseOver}),(0,o.jsx)(f.e,{currentTimeInSeconds:n,durationInSeconds:p,overlay:i}),(0,o.jsx)(d.y,{seekbarMin:0,seekbarMax:p,thumbLocation:n,segments:v,onThumbLocationChange:this.handleThumbLocationChange,onMouseOverLocationChange:this.handleMouseOverLocationChange,onMouseOverChange:this.handleMouseOverChange,alwaysShowThumb:u,thumbAriaAttributes:c})]})},n}(u.Component)},281976:function(e,n,t){"use strict";t.d(n,{e:function(){return u}});var i=t(474848),o=t(959340),r=t(914421),a=t(312663),s=(t(296540),t(478260)),u=function(e){var n=e.currentTimeInSeconds,t=e.durationInSeconds,u=Math.floor(Math.max(0,t-n));return(0,i.jsx)(o.P,{display:r.nl.Flex,justifyContent:r.A9.End,className:"vod-seekbar-time-labels",children:(0,i.jsx)(a.N,{color:!1===e.overlay?r.Q1.Base:r.Q1.Overlay,"aria-label":(0,s.hw)("Remaining time in seconds","ClipSeekbar"),children:u})})}},815759:function(e,n,t){"use strict";t.d(n,{l:function(){return b}});var i=t(331635),o=t(474848),r=t(920962),a=t(959340),s=t(914421),u=t(808681),c=t(86011),l=t(324602),d=t(312663),h=t(67813),p=t(723319),f=t(296540),v=t(790228),m=t(88609),g=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.wrapperRef=f.createRef(),n.seekbarRef=null,n.setSeekbarRef=function(e){n.seekbarRef=e},n}return(0,i.__extends)(n,e),n.prototype.render=function(){if(0===this.props.durationInSeconds)return null;var e=(0,m.X)(this.props.currentTimeInSeconds),n=(0,v.K)(this.props.currentTimeInSeconds/this.props.durationInSeconds,this.state.wrapperWidth,this.state.seekbarWidth).offset;return(0,o.jsx)(r.h,{overlay:!0,children:(0,o.jsx)(a.P,{display:s.nl.Flex,ref:this.setSeekbarRef,children:(0,o.jsx)("div",{style:{position:s.yX.Relative,marginInlineStart:"".concat(n,"px")},children:(0,o.jsx)(u.E,{direction:c.j.TopCenter,size:l.$V.Auto,offsetY:"-2rem",show:!0,children:(0,o.jsx)("div",{ref:this.wrapperRef,children:(0,o.jsx)(a.P,{display:s.nl.Flex,justifyContent:s.A9.Center,padding:{x:.5},children:(0,o.jsx)(d.N,{color:s.Q1.Overlay,children:e})})})})})})})},n.prototype.componentDidMount=function(){if(this.wrapperRef.current&&this.seekbarRef){var e=this.wrapperRef.current.getBoundingClientRect().width,n=this.seekbarRef.getBoundingClientRect().width;this.setState({wrapperWidth:e,seekbarWidth:n})}},n}(f.Component),b=function(e){return(0,o.jsx)(h.e,{type:p.ES.Fade,duration:p.Cf.Short,show:e.show,children:(0,o.jsx)(g,(0,i.__assign)({},e))})}},393942:function(e,n,t){"use strict";t.d(n,{y:function(){return x}});var i,o=t(331635),r=t(474848),a=t(296540),s=t(959340),u=t(914421),c=t(97774),l=t(216042),d=t(246942),h=t.n(d),p=t(478260);function f(e,n,t){return n>t?(p.x2.logger.withCategory("clamp-number").warn("Tried to clamp a number, but min is greater than max",{value:e,min:n,max:t}),e):Math.max(n,Math.min(t,e))}!function(e){e.Segment="seekbar-segment__segment"}(i||(i={}));var v,m=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.seekbarMax,t=e.seekbarMin,o=Math.max(n-t,0),a=f(this.props.start,t,n),s=f(this.props.end,t,n),d=(a-t)/o*100,p=Math.max(s-a,0)/o*100,v=h()(["seekbar-segment",this.props.className]);return(0,r.jsx)(l.S,{className:v,position:u.yX.Absolute,borderRadius:c.Z.Medium,children:(0,r.jsx)("span",{style:{insetInlineStart:"".concat(d,"%"),width:"".concat(p,"%"),backgroundColor:this.props.color},"data-test-selector":i.Segment})})},n}(a.PureComponent),g=function(e){var n=e.thumb,t=e.min,i=e.max,a=e.segments,l=Math.max(i-t,0),d=(f(e.thumbLocation,t,i)-t)/l*100;return(0,r.jsxs)(s.P,{className:"seekbar-bar",display:u.nl.Flex,alignItems:u.k2.Center,borderRadius:c.Z.Medium,position:u.yX.Relative,width:"100%",children:[a.map((function(e){return(0,r.jsx)(m,(0,o.__assign)({seekbarMin:t,seekbarMax:i},e),e.id)})),(0,r.jsx)(b,{leftPercentageOffset:d,children:n})]})},b=function(e){var n=f(e.leftPercentageOffset,0,100);return(0,r.jsx)(l.S,{position:u.yX.Absolute,children:(0,r.jsx)("span",{style:{insetInlineStart:"".concat(n,"%")},children:e.children})})};!function(e){e.InteractionArea="seekbar-interaction-area__interactionArea"}(v||(v={}));var k=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.seekbarWrapperRef=a.createRef(),n.touchIdentifier=C,n.handleMouseClick=function(e){n.processMouseEventOrTouch(e,M.Click)},n.handleMouseDown=function(e){n.processMouseEventOrTouch(e,M.DragStart),n.addMouseDocumentHandlers()},n.handleMouseMove=function(e){n.processMouseEventOrTouch(e,M.MouseMove)},n.handleMouseUp=function(e){n.processMouseEventOrTouch(e,M.DragEnd),n.removeDocumentHandlers()},n.handleMouseEnter=function(){n.props.onMouseEnter&&n.props.onMouseEnter()},n.handleMouseLeave=function(){n.props.onMouseLeave&&n.props.onMouseLeave()},n.handleTouchStart=function(e){var t=e.touches[0];n.touchIdentifier=t.identifier,n.processMouseEventOrTouch(t,M.DragStart),n.addTouchDocumentHandlers()},n.addMouseDocumentHandlers=function(){document.addEventListener("mousemove",n.handleDocumentMouseMove),document.addEventListener("mouseup",n.handleDocumentMouseUp)},n.addTouchDocumentHandlers=function(){document.addEventListener("touchmove",n.handleDocumentTouchMove),document.addEventListener("touchend",n.handleDocumentTouchEnd),document.addEventListener("touchcancel",n.handleDocumentTouchEnd)},n.removeDocumentHandlers=function(){document.removeEventListener("mousemove",n.handleDocumentMouseMove),document.removeEventListener("mouseup",n.handleDocumentMouseUp),document.removeEventListener("touchmove",n.handleDocumentTouchMove),document.removeEventListener("touchend",n.handleDocumentTouchEnd),document.removeEventListener("touchcancel",n.handleDocumentTouchEnd)},n.handleDocumentMouseMove=function(e){e.preventDefault&&e.preventDefault(),n.processMouseEventOrTouch(e,M.DragChange)},n.handleDocumentMouseUp=function(e){n.processMouseEventOrTouch(e,M.DragEnd),n.removeDocumentHandlers()},n.handleDocumentTouchMove=function(e){var t=w(n.touchIdentifier,e.touches);t&&n.processMouseEventOrTouch(t,M.DragChange)},n.handleDocumentTouchEnd=function(e){var t=w(n.touchIdentifier,e.changedTouches);t&&(n.touchIdentifier=C,n.processMouseEventOrTouch(t,M.DragEnd),n.removeDocumentHandlers())},n.processMouseEventOrTouch=function(e,t){var i=n.props,r=i.seekbarMin,a=i.seekbarMax,s=i.allowedMin,u=i.allowedMax,c=function(e,n,t,i,r){void 0===r&&(r={});if(!n)return t;var a=function(e){var n=e.eventClientX,t=e.seekbarMin,i=e.seekbarMax,o=e.allowedMax,r=e.allowedMin,a=e.seekbarWrapperRect,s=a.left,u=a.width;if(0===u)return t;var c=f((n-s)/u,0,1);return f(c*(i-t)+t,void 0===r?t:r,void 0===o?i:o)}((0,o.__assign)({seekbarWrapperRect:n.getBoundingClientRect(),eventClientX:e,seekbarMin:t,seekbarMax:i},r));return a}(e.clientX,n.seekbarWrapperRef.current,r,a,{allowedMin:s,allowedMax:u});switch(t){case M.Click:n.props.onClick(c);break;case M.DragStart:n.props.onDragStart(c);break;case M.DragChange:n.props.onDragChange(c);break;case M.DragEnd:n.props.onDragEnd(c);break;case M.MouseMove:n.props.onMouseMove(c)}},n}return(0,o.__extends)(n,e),n.prototype.componentWillUnmount=function(){this.removeDocumentHandlers()},n.prototype.render=function(){return(0,r.jsx)(l.S,{padding:{y:1},className:"seekbar-interaction-area",children:(0,r.jsx)("div",{ref:this.seekbarWrapperRef,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-selector":v.InteractionArea,"data-a-target":"player-seekbar",children:this.props.children})})},n}(a.Component);function w(e,n){return Array.from(n).find((function(n){return n.identifier===e}))}var M,C=-1;!function(e){e.DragStart="drag-start",e.DragChange="drag-change",e.DragEnd="drag-end",e.Click="click",e.MouseMove="mousemove"}(M||(M={}));var T=t(67813),S=t(723319),y=t(843004),_=function(e){var n,t,i;return(0,r.jsx)(T.e,{show:!!e.show,type:S.ES.Fade,children:(0,r.jsx)(s.P,(0,o.__assign)({},e.ariaAttributes,{"aria-label":(null===(n=e.ariaAttributes)||void 0===n?void 0:n["aria-live"])||null===(t=e.ariaAttributes)||void 0===t?void 0:t["aria-label"],className:"seekbar-thumb",role:"slider",tabIndex:0,children:(0,r.jsx)(y.L,{children:null===(i=e.ariaAttributes)||void 0===i?void 0:i["aria-label"]})}))})},D=t(696830),x=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={draggingThumbLocation:null,isMouseOver:!1},n.handleDragChange=function(e){n.setState({draggingThumbLocation:e})},n.handleDragStart=function(e){n.setState({draggingThumbLocation:e}),n.props.onThumbDragStart&&n.props.onThumbDragStart()},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChange&&n.props.onThumbLocationChange(e),n.setState({draggingThumbLocation:null})},n.handleMouseEnter=function(){n.setState({isMouseOver:!0}),n.props.onMouseOverChange&&n.props.onMouseOverChange(!0)},n.handleMouseLeave=function(){n.setState({isMouseOver:!1}),n.props.onMouseOverChange&&n.props.onMouseOverChange(!1)},n.handleMouseMove=function(e){n.props.onMouseOverLocationChange&&n.props.onMouseOverLocationChange(e)},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.alwaysShowThumb,t=e.seekbarMin,i=e.seekbarMax,o=e.thumbAriaAttributes,a=this.state,s=a.draggingThumbLocation,u=a.isMouseOver,c=null!==s,l=(0,r.jsx)(_,{ariaAttributes:o,show:u||c||n}),d=null!==s?s:this.props.thumbLocation,h=function(e,n){if(!e)return[];return e.map((function(e){switch(e.type){case D.b.Fixed:return L(e,n);case D.b.AfterThumb:return I(e,n);case D.b.FillToThumb:return E(e,n);default:return null}})).filter((function(e){return!!e}))}(this.props.segments,{seekbarMin:t,thumbLocation:d});return(0,r.jsx)(k,{onDragStart:this.handleDragStart,onDragChange:this.handleDragChange,onDragEnd:this.handleThumbLocationChange,onClick:this.handleThumbLocationChange,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove,seekbarMin:t,seekbarMax:i,allowedMin:this.props.minAllowedThumbLocation,allowedMax:this.props.maxAllowedThumbLocation,children:(0,r.jsx)(g,{min:t,max:i,thumbLocation:d,thumb:l,segments:h})})},n}(a.Component);var L=function(e){return{id:e.id,color:e.color,start:e.start,end:e.end}},I=function(e,n){return{id:e.id,color:e.color,start:n.thumbLocation,end:n.thumbLocation+e.length}},E=function(e,n){return{id:e.id,color:e.color,start:n.seekbarMin,end:n.thumbLocation}}},696830:function(e,n,t){"use strict";var i;t.d(n,{b:function(){return i}}),function(e){e.Fixed="fixed",e.FillToThumb="fill-to-thumb",e.AfterThumb="after-thumb"}(i||(i={}))},637121:function(e,n,t){"use strict";t.d(n,{Q:function(){return N},H:function(){return R}});var i,o=t(331635),r=t(474848),a=t(959340),s=t(914421),u=t(724422),c=t(296540),l=t(841019),d=t(393942),h=t(696830),p=t(67813),f=t(723319),v=t(826094),m=t(868238),g=t(478260),b=t(928778),k=t(509856),w=t(933781),M=t(347953),C=t(583167),T=t(116549),S=t(33698),y=t.n(S);function _(e){return(0,o.__awaiter)(this,void 0,Promise,(function(){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,fetch(e)];case 1:if(200===(n=t.sent()).status)return[2,n.json()];throw new Error("Could not fetch seek previews at ".concat(e))}}))}))}function D(e){return e.data&&e.data.video&&e.data.video.seekPreviewsURL}!function(e){e.Low="low",e.High="high"}(i||(i={}));var x=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.state.seekPreviews,n=D(this.props),t=!!this.props.data&&!this.props.data.loading;return(0,r.jsx)(p.e,{type:f.ES.Fade,duration:f.Cf.Short,show:t&&this.props.show,children:(0,r.jsx)(T.$c,{currentTimeInSeconds:this.props.currentTimeInSeconds,durationInSeconds:this.props.durationInSeconds,seekPreviewsURL:n||void 0,seekPreview:e&&e[0]})})},n.prototype.componentDidUpdate=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,t,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!(n=D(this.props))||n===D(e))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,_(n)];case 2:return t=o.sent(),this.setState({seekPreviews:t}),[3,4];case 3:return i=o.sent(),g.vF.warn((0,v.d)(i,{useRawMessage:!0})),[3,4];case 4:return[2]}}))}))},n}(c.Component),L=(0,m.Zz)((0,w.cj)((function(e){return{vodID:(0,M.hq)(e.content),includePrivateVODs:(0,C.wk)({playerPublicPropsContext:e}).includePrivateVODs||!1}})),(0,k.h)(),(0,b._v)(y(),{options:function(e){var n;return{variables:{videoID:null!==(n=e.vodID)&&void 0!==n?n:e.collectionVodID,includePrivate:e.includePrivateVODs||!1}}},skip:function(e){return!e.vodID&&!e.collectionVodID}}))(x),I=t(312663),E=t(88609),O=function(e){var n=e.currentTimeInSeconds,t=e.durationInSeconds,i=(0,E.X)(n),o=(0,E.X)(t);return(0,r.jsxs)(a.P,{display:s.nl.Flex,justifyContent:s.A9.Between,className:"vod-seekbar-time-labels",children:[(0,r.jsx)(I.N,{"data-a-target":"player-seekbar-current-time",color:s.Q1.Overlay,children:i}),(0,r.jsx)(I.N,{"data-a-target":"player-seekbar-duration","data-a-value":t,color:s.Q1.Overlay,children:o})]})},N=25,R=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hoverLocation:0,isMouseOver:!1},n.throttleTimer=new l.U(N),n.handleThumbDragStart=function(){n.props.onThumbDragStart()},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChanged(e)},n.handleMouseOverLocationChange=function(e){n.throttleTimer.invoke((function(){n.setState((function(n){return n.hoverLocation===e?null:{hoverLocation:e}}))}))},n.handleMouseOverChange=function(e){n.setState((function(n){return n.isMouseOver===e?null:{isMouseOver:e}}))},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e,n=this.props,t=n.thumbLocation,i=n.bufferDuration,c=n.vodLength,l=n.mutedSegments,p=n.editingSegments,f=c,v=p?function(e){if(!e)return[];return e.map((function(e,n){var t=e.startOffset,i=e.endOffset;return{type:h.b.Fixed,id:"editing-segment-".concat(n),start:t,end:i,color:u.K["color-yellow"]}}))}(p):(0,o.__spreadArray)([(e=i,{type:h.b.AfterThumb,id:"buffer-segment",color:"hsla(0, 0%, 100%, 0.85)",length:e}),{type:h.b.FillToThumb,id:"watched-segment",color:u.K["color-twitch-purple-10"]}],function(e){return e.map((function(e,n){var t=e.duration,i=e.offset;return{type:h.b.Fixed,id:"muted-segment-".concat(n),start:i,end:i+t,color:"rgba(212, 73, 73, 0.5)"}}))}(l),!0);return(0,r.jsxs)(a.P,{display:s.nl.Flex,flexDirection:s.bo.Column,alignItems:s.k2.Stretch,children:[(0,r.jsx)(L,{currentTimeInSeconds:this.state.hoverLocation,durationInSeconds:f,show:this.state.isMouseOver}),(0,r.jsx)(O,{currentTimeInSeconds:t,durationInSeconds:f}),(0,r.jsx)(d.y,{alwaysShowThumb:!!p,seekbarMin:0,seekbarMax:f,thumbLocation:t,onThumbLocationChange:this.handleThumbLocationChange,onThumbDragStart:this.handleThumbDragStart,onMouseOverLocationChange:this.handleMouseOverLocationChange,onMouseOverChange:this.handleMouseOverChange,segments:v})]})},n}(c.Component)},116549:function(e,n,t){"use strict";t.d(n,{$c:function(){return g}});var i,o=t(331635),r=t(474848),a=t(920962),s=t(959340),u=t(914421),c=t(808681),l=t(86011),d=t(324602),h=t(312663),p=t(296540),f=t(88609),v=t(790228);!function(e){e.PreviewImage="vod-seekbar-preview-overlay-preview-image",e.Wrapper="vod-seekbar-preview-overlay-wrapper"}(i||(i={}));var m=148,g=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.wrapperRef=p.createRef(),n.seekbarRef=null,n.setSeekbarRef=function(e){n.seekbarRef=e},n}return(0,o.__extends)(n,e),n.prototype.render=function(){if(0===this.props.durationInSeconds)return null;var e=(0,f.X)(this.props.currentTimeInSeconds),n=(0,v.K)(this.props.currentTimeInSeconds/this.props.durationInSeconds,this.state.wrapperWidth,this.state.seekbarWidth).offset;return(0,r.jsx)(a.h,{overlay:!0,children:(0,r.jsx)(s.P,{display:u.nl.Flex,ref:this.setSeekbarRef,children:(0,r.jsx)("div",{className:"vod-seekbar-preview-overlay__wrapper","data-test-selector":i.Wrapper,style:{position:u.yX.Relative,marginInlineStart:"".concat(n,"px")},children:(0,r.jsx)(c.E,{direction:l.j.TopCenter,size:d.$V.Auto,offsetY:"-2rem",show:!0,children:(0,r.jsxs)("div",{ref:this.wrapperRef,children:[this.renderPreviewImage(),(0,r.jsx)(s.P,{display:u.nl.Flex,justifyContent:u.A9.Center,padding:{x:.5},children:(0,r.jsx)(h.N,{color:u.Q1.Overlay,children:e})})]})})})})})},n.prototype.componentDidMount=function(){if(this.wrapperRef.current&&this.seekbarRef){var e=this.wrapperRef.current.getBoundingClientRect().width,n=this.seekbarRef.getBoundingClientRect().width;this.setState({wrapperWidth:e,seekbarWidth:n})}},n.prototype.renderPreviewImage=function(){var e=this.props,n=e.currentTimeInSeconds,t=e.seekPreviewsURL,o=e.seekPreview;if(!t||!o)return null;var a=m/o.width*o.height,s=Math.floor(n/o.interval),c=Math.floor(s/(o.rows*o.cols)),l=s%(o.rows*o.cols),d=o.images[c],h=l%o.cols*m,p=Math.floor(l/o.cols)*a,f=t.substring(0,t.lastIndexOf("/"));return(0,r.jsx)("div",{"data-test-selector":i.PreviewImage,style:{backgroundImage:"url(".concat(f,"/").concat(d,")"),width:m,height:a,backgroundPosition:"-".concat(h,"px -").concat(p,"px"),backgroundSize:"".concat(m*o.cols,"px"),position:u.yX.Relative}})},n}(p.Component)},790228:function(e,n,t){"use strict";function i(e,n,t){if(!n||!t)return{offset:0};var i=e*t,o=n/2;return i<o?{offset:o}:i>t-o?{offset:t-o}:{offset:i}}t.d(n,{K:function(){return i}})},88609:function(e,n,t){"use strict";function i(e){if(e<0||e>259200||!isFinite(e))return"00:00:00";var n=Math.floor(e/3600),t=Math.floor(e%3600/60),i=Math.floor(e%60);return"".concat(o(n,2),":").concat(o(t,2),":").concat(o(i,2))}function o(e,n){var t=e.toString();return t.length<n?"0".repeat(n-t.length)+t:t}t.d(n,{X:function(){return i}})}}]);